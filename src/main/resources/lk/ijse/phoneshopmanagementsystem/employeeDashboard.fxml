<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.CategoryAxis?>
<?import javafx.scene.chart.LineChart?>
<?import javafx.scene.chart.NumberAxis?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.effect.DropShadow?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<BorderPane stylesheets="@../../styles/dashboard.css" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="lk.ijse.phoneshopmanagementsystem.controller.DashboardController">

    <top>
        <VBox style="-fx-background-color: #1e293b; -fx-padding: 15;">
            <HBox alignment="CENTER_LEFT" spacing="15">
                <ImageView fitHeight="40" fitWidth="40">
                    <effect><DropShadow color="#ff9500" radius="10" /></effect>
                </ImageView>
                <Label style="-fx-text-fill: #ffa500; -fx-font-size: 22; -fx-font-weight: bold;" text="Smart Way Mobiles" />
                <Region HBox.hgrow="ALWAYS" />

                <VBox alignment="CENTER_RIGHT" spacing="2">
                    <Label fx:id="timeLabel" text="00:00:00" />
                </VBox>

                <Label fx:id="lblusername" style="-fx-text-fill: white; -fx-font-size: 14; -fx-padding: 0 15 0 15;" text="Oshan">
                    <font>
                        <Font name="System Bold" size="12.0" />
                    </font>
                </Label>
                <Button onAction="#logout" styleClass="logout-btn" text="Logout" />
            </HBox>
        </VBox>
    </top>

    <left>
        <VBox minWidth="220" spacing="15" style="-fx-background-color: #1e293b; -fx-padding: 0 10 0 10;">
            <padding><Insets left="15" right="15" top="30" /></padding>
            <Button fx:id="btnDashboard" prefHeight="62.0" prefWidth="210.0" style="-fx-background-radius: 20;" styleClass="menu-btn selected" text="ðŸ“Š Dashboard">
                <font>
                    <Font size="20.0" />
                </font>
            </Button>
            <Button fx:id="itemsButton" onAction="#itemsAction" styleClass="menu-btn" text="ðŸ“± Items" />
            <Button fx:id="placeOrdersButton" onAction="#placeOrdersAction" styleClass="menu-btn" text="ðŸ›’ Place Order" />
            <Button fx:id="ordersButton" onAction="#ordersAction" styleClass="menu-btn" text="ðŸ“¦ Orders" />
            <Button fx:id="customerButton" onAction="#customerAction" styleClass="menu-btn" text="ðŸ‘¤ Customers" />
            <Button fx:id="suppliersButton" onAction="#suppliersAction" styleClass="menu-btn" text="ðŸšš Suppliers" />
            <Button fx:id="repairsButton" onAction="#repairsAction" styleClass="menu-btn" text="ðŸ”§ Repairs" />
            <Button fx:id="userManageButton" disable="true" onAction="#userManageAction" styleClass="menu-btn" text="ðŸ‘¥ Users" />
            <Button fx:id="reportsButton" disable="true" onAction="#reportsAction" styleClass="menu-btn" text="ðŸ“Š Reports" />
        </VBox>
    </left>

    <center>
        <ScrollPane fitToWidth="true" style="-fx-background-color: #0f172a; -fx-background: #0f172a;">
            <VBox style="-fx-background-color: #0f172a; -fx-padding: 30; -fx-spacing: 25;">

                <VBox spacing="5">
                    <Label fx:id="welcomeLabel" style="-fx-font-size: 28; -fx-font-weight: bold; -fx-text-fill: #EDFFA6;" text="Welcome back!" />
                    <Label fx:id="dateLabel" style="-fx-text-fill: #94a3b8; -fx-font-size: 15;" text="" />
                </VBox>

                <GridPane hgap="20" vgap="20">
                    <VBox prefWidth="280" styleClass="box" GridPane.columnIndex="0" GridPane.rowIndex="0">
                        <Label styleClass="box-title" text="Today's Sales" />
                        <Label fx:id="salesLabel" styleClass="box-value" text="Rs. 0.00" />
                        <Label style="-fx-text-fill: #64748b; -fx-font-size: 12px;" text="ðŸ’° Revenue today" />
                    </VBox>

                    <VBox prefWidth="280" styleClass="box" GridPane.columnIndex="1" GridPane.rowIndex="0">
                        <Label styleClass="box-title" text="Total Orders" />
                        <Label fx:id="ordersLabel" styleClass="box-value" text="0" />
                        <Label style="-fx-text-fill: #64748b; -fx-font-size: 12px;" text="ðŸ“¦ All time orders" />
                    </VBox>

                    <VBox prefWidth="280" styleClass="box" GridPane.columnIndex="2" GridPane.rowIndex="0">
                        <Label styleClass="box-title" text="Low Stock Items" />
                        <Label fx:id="lowStockLabel" styleClass="box-value" text="0" />
                        <Label style="-fx-text-fill: #64748b; -fx-font-size: 12px;" text="âš ï¸ Need restock" />
                    </VBox>

                    <VBox prefWidth="280" styleClass="box" GridPane.columnIndex="3" GridPane.rowIndex="0">
                        <Label styleClass="box-title" text="Pending Repairs" />
                        <Label fx:id="repairsLabel" styleClass="box-value" text="0" />
                        <Label style="-fx-text-fill: #64748b; -fx-font-size: 12px;" text="ðŸ”§ In progress" />
                    </VBox>

                    <columnConstraints>
                        <ColumnConstraints hgrow="ALWAYS" />
                        <ColumnConstraints hgrow="ALWAYS" />
                        <ColumnConstraints hgrow="ALWAYS" />
                        <ColumnConstraints hgrow="ALWAYS" />
                    </columnConstraints>
                    <rowConstraints>
                        <RowConstraints />
                    </rowConstraints>
                </GridPane>

                <HBox spacing="20">
                    <VBox spacing="10" style="-fx-background-color: #1e293b; -fx-padding: 20; -fx-background-radius: 10;" HBox.hgrow="ALWAYS">
                        <Label style="-fx-text-fill: #FCB43F; -fx-font-size: 16; -fx-font-weight: bold;" text="ðŸ“ˆ Last 7 Days Sales" />
                        <LineChart fx:id="salesChart" legendVisible="false" prefHeight="250" style="-fx-background-color: transparent;">
                            <xAxis>
                                <CategoryAxis side="BOTTOM" />
                            </xAxis>
                            <yAxis>
                                <NumberAxis side="LEFT" />
                            </yAxis>
                        </LineChart>
                    </VBox>

                    <VBox prefWidth="400" spacing="10" style="-fx-background-color: #1e293b; -fx-padding: 20; -fx-background-radius: 10;">
                        <Label style="-fx-text-fill: #E6FC3F; -fx-font-size: 16; -fx-font-weight: bold;" text="ðŸ† Top Selling Items" />
                        <TableView fx:id="topItemsTable" prefHeight="250" style="-fx-background-color: #334155; -fx-background-radius: 8;">
                            <columns>
                                <TableColumn fx:id="colItemModel" prefWidth="150" text="Model" />
                                <TableColumn fx:id="colItemBrand" prefWidth="100" text="Brand" />
                                <TableColumn fx:id="colItemSold" prefWidth="107.20013427734375" text="Sold" />
                            </columns>
                        </TableView>
                    </VBox>
                </HBox>

                <VBox spacing="10" style="-fx-background-color: #1e293b; -fx-padding: 20; -fx-background-radius: 10;">
                    <Label style="-fx-text-fill: #9EFC3F; -fx-font-size: 16; -fx-font-weight: bold;" text="ðŸ“‹ Recent Orders" />
                    <TableView fx:id="recentOrdersTable" prefHeight="200" style="-fx-background-color: #334155; -fx-background-radius: 8;">
                        <columns>
                            <TableColumn fx:id="colOrderId" prefWidth="150" text="Order ID" />
                            <TableColumn fx:id="colOrderDate" prefWidth="216.80007934570312" text="Date" />
                            <TableColumn fx:id="colCustomerName" prefWidth="336.7999572753906" text="Customer" />
                            <TableColumn fx:id="colOrderAmount" prefWidth="500.0" text="Amount" />
                        </columns>
                    </TableView>
                </VBox>

                <VBox spacing="15">
                    <Label style="-fx-text-fill: white; -fx-font-size: 18; -fx-font-weight: bold;" text="âš¡ Quick Actions" />
                    <HBox spacing="20">
                        <Button fx:id="btnneworder" onAction="#placeOrdersAction" styleClass="big-btn" text="ðŸ“¦ New Order" />
                        <Button fx:id="btnitemadd" onAction="#itemsAction" styleClass="big-btn" text="âž• Add Item" />
                        <Button fx:id="btncustomeradd" onAction="#customerAction" styleClass="big-btn" text="ðŸ‘¤ Add Customer" />
                        <Button onAction="#reportsAction" styleClass="big-btn" text="ðŸ“Š View Reports" />
                    </HBox>
                </VBox>

            </VBox>
        </ScrollPane>
    </center>
</BorderPane>